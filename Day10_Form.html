<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Form</title>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 1vw;
        }
    </style>
</head>

<body>
    <fieldset style="width:450px;margin:auto">
        <legend>Form Data Student</legend>
        <form id="data-form">
            <label>Fullname :</label>
            <input id="fullname" type="text"><br>
            <label>Age : </label>
            <input id="age" type="text"><br>
            <label>Email : </label>
            <input id="email" type="text"><br>
            <label>Gender :</label>
            <input type="radio" name="gender" value="Male">Male</input>
            <input type="radio" name="gender" value="Female">Female</input><br>
            <label>Class Program :</label>
            <select id="program">
                <option value="null">Choose Program</option>
                <option value="Full-stack Web">Full-stack Web</option>
                <option value="Data Science">Data Science</option>
                <option value="Digital Marketing">Digital Marketing</option>
                <option value="UI/UX">UI/UX</option>
            </select>
        </form>
        <button type="button" onclick="handleSubmit()">Submit</button>
        <br>
        <br>
        <span>Filter</span>
        <form id="filter-form">
            <label>Fullname :</label>
            <input id="fullname" type="text"><br>
            <label>Email : </label>
            <input id="email" type="text"><br>
            <label>Class Program :</label>
            <select id="program">
                <option value="null">Choose Program</option>
                <option value="Full-stack Web">Full-stack Web</option>
                <option value="Data Science">Data Science</option>
                <option value="Digital Marketing">Digital Marketing</option>
                <option value="UI/UX">UI/UX</option>
            </select>
        </form>
        <button type="button" onclick="">Search</button>
        <br>
        <br>
        <table style="margin: auto;">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Fullname</th>
                    <th>Age</th>
                    <th>Email</th>
                    <th>Gender</th>
                    <th>Class Program</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="list-data">

            </tbody>
        </table>
    </fieldset>
</body>
<script>
    let dbStudent = [];
    let lastId = dbStudent.length == 0 ? 0 : dbStudent[dbStudent.length - 1].id;  // ternary operator

    class Student {
        constructor(_id, _name, _age, _email, _gender, _program) {
            this.id = _id;
            this.name = _name;
            this.age = _age;
            this.email = _email;
            this.gender = _gender;
            this.program = _program;
        }
    }

    const handleSubmit = () => {
        let form = document.getElementById("data-form");
        lastId += 1;
        let name = form.elements["fullname"].value
        let age = form.elements["age"].value
        let email = form.elements["email"].value
        let gender = form.elements["gender"].value
        let classProgram = form.elements["program"].value

        // Menambahkan data
        dbStudent.push(new Student(lastId, name, age, email, gender, classProgram));
        console.table(dbStudent);

        // Menampilkan data
        printData();
        // reset value pada form input
        console.log(document.getElementsByName("gender"))
        form.elements["fullname"].value = null;
        form.elements["age"].value = null;
        form.elements["email"].value = null;
        form.elements["gender"].value = null;
        document.getElementsByName("gender").forEach(val => val.checked = false)
        form.elements["program"].value = null;
    }

    const printData = () => {
        let htmlElement = dbStudent.map((val, idx) => {
            return `<tr>
                <td>${idx + 1}</td>
                <td>${val.name}</td>
                <td>${val.age}</td>
                <td>${val.email}</td>
                <td>${val.gender}</td>
                <td>${val.program}</td>
                <td><button type="button" onclick="btDelete(${idx})">Delete</button></td>
            </tr>`
        })

        document.getElementById("list-data").innerHTML = htmlElement.join('');
    }

    const btDelete = (idx) => {
        dbStudent.splice(idx,1);
        printData();
    }
</script>

</html>